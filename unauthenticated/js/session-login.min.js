try{const e=document.querySelector("html"),t="data-platform";if(navigator.userAgentData&&navigator.userAgentData.platform){const n=navigator.userAgentData.platform.toLowerCase();if(n.includes("linux")){e.setAttribute(t,"linux")}else if(n.includes("windows")){e.setAttribute(t,"windows")}else if(n.includes("mac")){e.setAttribute(t,"macos")}}else if(navigator.platform){const n=navigator.platform.toLowerCase();if(n.includes("linux")){e.setAttribute(t,"linux")}else if(n.includes("win")){e.setAttribute(t,"windows")}else if(n.includes("mac")){e.setAttribute(t,"macos")}}}catch(e){console.warn("Failed to detect platform:",e)}document.addEventListener("DOMContentLoaded",function(e){(function(){const e=document.querySelectorAll('input[type="password"]');e.forEach(e=>{const t=document.createElement("span");t.classList.add("input_warning_caps");t.setAttribute("title","Caps Lock");t.classList.add("large");e.classList.add("use_input_warning_caps");e.parentNode.insertBefore(t,e.nextSibling);e.addEventListener("blur",function(){this.nextSibling.classList.remove("visible")});e.addEventListener("keydown",function(e){if(typeof e.getModifierState==="function"){let t;if(e.keyCode===20){t=!e.getModifierState("CapsLock")}else{t=e.getModifierState("CapsLock")}if(t){this.nextSibling.classList.add("visible")}else{this.nextSibling.classList.remove("visible")}}})})})();(function(){const e=typeof theme_language==="object"?theme_language:{},t=document.querySelector(".session_login_back .form-signin-group > .btn-success"),n=document.querySelectorAll(".session_login_flipper [data-flipper]"),s=document.querySelector('.session_login_back input[name="forgot"]'),i=function(t,n){const s=document.querySelector(".container.session_login > .alert");if(!s){return}s.classList.remove("alert-warning","alert-success","alert-danger");const i=s.querySelector(".fa"),r=s.querySelector("strong"),o=s.querySelector("span");if(t==="success"){const t="faa-bounce animated".split(" ");s.classList.add("alert-success",...t);setTimeout(()=>{s.classList.remove(...t)},1500);if(i)i.className="fa fa-check-circle";if(r)r.innerHTML='<i class="fa fa-check-circle"></i> '+e.session_success;if(o)o.textContent=n}else{const t="faa-horizontal animated".split(" ");s.classList.add("alert-danger",...t);setTimeout(()=>{s.classList.remove(...t)},1500);if(i)i.className="fa fa-exclamation-circle";if(r)r.innerHTML='<i class="fa fa-exclamation-circle"></i> '+e.session_error;if(o)o.textContent=n}};if(n){n.forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();const t=document.querySelector(".session_login_flipper");t.classList.toggle("flipped");const n=!t.classList.contains("flipped")?document.querySelector('input[name="user"]'):document.querySelector('input[name="forgot"]');if(n){setTimeout(()=>{n.focus()},600)}})})}if(s){s.addEventListener("keydown",function(e){if(e.key==="Enter"){e.preventDefault();if(t)t.click();return false}})}if(t){t.addEventListener("click",function(t){t.preventDefault();if(this.classList.contains("disabled")){return}if(!s||!s.value.trim()){i("error",e.session_cannot);return}const n=s.value.trim(),r=this.querySelector("i");spinner(r);fetch("forgot_send.cgi",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:`forgot=${encodeURIComponent(n)}`}).then(t=>{if(!t.ok){throw new Error(e.session_neterror)}return t.text()}).then(t=>{const n=new DOMParser,s=n.parseFromString(t,"text/html");const o=s.querySelector(".panel-body > center");if(o&&o.textContent.trim()){spinner(r,true,true);i("success",o.textContent.trim());return}spinner(r,true);const a=s.querySelector(".panel-body > [data-fatal-error-text]");if(a&&a.textContent.trim()){i("error",a.textContent.trim());return}i("error",e.session_unkerror)}).catch(t=>{console.warn("Request failed:",t);i("error",e.session_conerror)})})}})()});function spinner(e,t,n){e=e?e:document.querySelector("button i.fa-sign-in:not(.invisible)")||document.querySelector("button i.fa-qrcode:not(.invisible)"),s='<span class="cspinner_container"><span class="cspinner">'+'<span class="cspinner-icon white small"></span></span></span>';if(e&&!t){e.classList.add("invisible");e.insertAdjacentHTML("afterend",s);e.parentNode.classList.add("disabled");e.parentNode.disabled=true}else if(e&&t){e.classList.remove("invisible");e.parentNode.classList.remove("disabled");e.parentNode.disabled=false;var i=document.querySelector(".cspinner_container");if(i){i.parentNode.removeChild(i)}if(n){e.className="fa2 fa2-marker-check";e.parentNode.classList.add("disabled")}}}